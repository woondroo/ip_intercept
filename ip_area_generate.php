<?php
/**
 * 中国IP段集合
 */
$str = "47.153.128.0 47.154.255.255
58.14.0.0 58.25.255.255
58.30.0.0 58.63.255.255
58.66.0.0 58.68.255.255
58.82.0.0 58.83.255.255
58.87.64.0 58.87.127.255
58.99.128.0 58.101.255.255
58.116.0.0 58.119.255.255
58.128.0.0 58.135.255.255
58.144.0.0 58.144.255.255
58.154.0.0 58.155.255.255
58.192.0.0 58.223.255.255
58.240.0.0 58.255.255.255
59.32.0.0 59.65.255.255
59.67.0.0 59.83.255.255
59.107.0.0 59.111.255.255
59.151.0.0 59.151.127.255
59.155.0.0 59.155.255.255
59.172.0.0 59.175.255.255
59.191.0.0 59.201.255.255
59.201.255.255 59.211.255.255
59.211.255.255 59.221.255.255
59.221.255.255 59.231.255.255
59.231.255.255 59.241.255.255
59.241.255.255 59.251.255.255
59.251.255.255 59.255.255.255
60.0.0.0 60.11.255.255
60.11.255.255 60.21.255.255
60.21.255.255 60.31.255.255
60.55.0.0 60.55.255.255
60.63.0.0 60.63.255.255
60.160.0.0 60.171.255.255
60.171.255.255 60.181.255.255
60.181.255.255 60.191.255.255
60.194.0.0 60.195.255.255
60.200.0.0 60.223.255.255
60.232.0.0 60.233.255.255
60.235.0.0 60.235.255.255
60.245.128.0 60.245.255.255
60.247.0.0 60.247.255.255
60.252.0.0 60.253.255.255
60.255.0.0 60.255.255.255
61.4.64.0 61.4.191.255
61.8.160.0 61.8.175.255
61.26.103.0 61.26.103.255
61.28.0.0 61.29.255.255
61.45.128.0 61.45.191.255
61.47.128.0 61.55.255.255
61.87.192.0 61.87.255.255
61.128.0.0 61.131.255.255
61.131.255.255 61.141.255.255
61.141.255.255 61.151.255.255
61.151.255.255 61.161.255.255
61.161.255.255 61.171.255.255
61.171.255.255 61.181.255.255
61.181.255.255 61.191.255.255
61.232.0.0 61.237.255.255
61.240.0.0 61.243.255.255
80.227.196.0 80.227.196.255
116.1.0.0 116.11.255.255
116.13.0.0 116.13.255.255
116.16.0.0 116.23.255.255
116.23.255.255 116.31.255.255
116.52.0.0 116.58.223.255
116.60.0.0 116.63.255.255
116.66.0.0 116.66.127.255
116.69.0.0 116.70.127.255
116.76.0.0 116.79.255.255
116.89.144.0 116.90.191.255
116.95.0.0 116.95.255.255
116.112.0.0 116.117.255.255
116.128.0.0 116.135.255.255
116.135.255.255 116.145.255.255
116.145.255.255 116.155.255.255
116.155.255.255 116.165.255.255
116.165.255.255 116.175.255.255
116.175.255.255 116.185.255.255
116.185.255.255 116.195.255.255
116.198.0.0 116.199.159.255
116.204.0.0 116.205.255.255
116.207.0.0 116.219.255.255
116.224.0.0 116.239.255.255
116.242.0.0 116.249.255.255
116.252.0.0 116.255.255.255
117.8.0.0 117.15.255.255
117.21.0.0 117.45.255.255
117.48.0.0 117.51.255.255
117.53.48.0 117.53.191.255
117.57.0.0 117.95.255.255
117.100.0.0 117.101.255.255
117.103.16.0 117.103.143.255
117.106.0.0 117.107.255.255
117.112.0.0 117.191.255.255
118.21.0.0 118.21.255.255
118.24.0.0 118.26.255.255
118.45.36.0 118.45.36.255
118.72.0.0 118.79.255.255
118.81.0.0 118.81.255.255
118.84.0.0 118.84.255.255
118.88.0.0 118.88.255.255
118.91.0.0 118.91.255.255
118.112.0.0 118.126.255.255
118.144.0.0 118.147.255.255
118.192.0.0 118.192.127.255
118.197.0.0 118.197.255.255
118.205.0.0 118.205.255.255
118.212.0.0 118.229.219.255
118.244.0.0 118.245.255.255
118.248.0.0 118.249.255.255
119.0.0.0 119.5.255.255
119.12.0.0 119.12.255.255
119.18.0.0 119.23.255.255
119.32.20.0 119.32.63.255
119.36.0.0 119.36.255.255
119.38.0.0 119.40.255.255
119.45.192.0 119.45.255.255
119.48.0.0 119.48.255.255
119.81.0.0 119.81.255.255
119.96.0.0 119.96.255.255
119.112.0.0 119.127.98.255
119.127.98.255 119.137.98.255
119.137.98.255 119.147.98.255
119.161.0.0 119.161.255.255
119.167.0.0 119.167.255.255
120.0.0.0 120.7.255.255
120.32.0.0 120.39.255.255
120.48.0.0 120.48.255.255
120.64.0.0 120.67.255.255
120.87.201.0 120.87.201.255
121.0.16.0 121.0.31.255
121.4.0.0 121.5.255.255
121.8.0.0 121.43.255.255
121.46.0.0 121.49.255.255
121.51.0.0 121.52.255.255
121.55.0.0 121.63.255.255
121.68.0.0 121.71.255.255
121.76.0.0 121.77.255.255
121.79.128.0 121.79.191.255
121.89.0.0 121.89.255.255
121.100.128.0 121.101.223.255
121.192.0.0 121.199.255.255
121.201.0.0 121.201.255.255
121.204.0.0 121.207.255.255
121.224.0.0 121.239.255.255
121.248.0.0 121.251.255.255
121.255.0.0 121.255.255.255
122.0.64.0 122.0.255.255
122.4.0.0 122.15.255.255
122.17.64.0 122.17.127.255
122.48.0.0 122.49.63.255
122.51.0.0 122.51.255.255
122.64.0.0 122.97.255.255
122.102.0.0 122.102.95.255
122.112.0.0 122.115.255.255
122.136.0.0 122.144.255.255
122.152.192.0 122.152.255.255
122.156.0.0 122.159.255.255
122.186.0.0 122.186.255.255
122.192.0.0 122.195.255.255
122.198.0.0 122.198.255.255
122.200.64.0 122.200.127.255
122.204.0.0 122.207.255.255
122.224.0.0 122.248.63.255
123.0.128.0 123.0.191.255
123.4.0.0 123.15.255.255
123.49.128.0 123.49.255.255
123.52.0.0 123.101.255.255
123.103.0.0 123.103.127.255
123.108.128.0 123.108.223.255
123.112.0.0 123.139.255.255
123.144.0.0 123.175.255.255
123.177.0.0 123.191.255.255
123.196.0.0 123.197.255.255
123.199.128.0 123.199.255.255
123.206.0.0 123.207.255.255
123.232.0.0 123.235.255.255
123.242.0.0 123.242.127.255
123.244.0.0 123.247.255.255
123.249.0.0 123.249.255.255
123.253.0.0 123.253.255.255
124.6.64.0 124.6.127.255
124.14.0.0 124.17.255.255
124.20.0.0 124.23.255.255
124.28.192.0 124.29.127.255
124.31.0.0 124.31.255.255
124.40.112.0 124.40.191.255
124.42.0.0 124.42.255.255
124.47.0.0 124.47.63.255
124.64.0.0 124.79.255.255
124.88.0.0 124.95.255.255
124.108.8.0 124.108.47.255
124.112.0.0 124.119.255.255
124.126.0.0 124.135.255.255
124.147.128.0 124.147.255.255
124.156.0.0 124.156.255.255
124.160.0.0 124.167.255.255
124.172.0.0 124.175.255.255
124.192.0.0 124.193.255.255
124.196.0.0 124.196.255.255
124.200.0.0 124.207.255.255
124.220.0.0 124.240.191.255
124.242.0.0 124.243.255.255
124.248.0.0 124.251.255.255
124.254.0.0 124.254.63.255
125.31.192.0 125.47.255.255
125.58.128.0 125.58.255.255
125.61.128.0 125.62.63.255
125.64.0.0 125.98.255.255
125.104.0.0 125.127.255.255
125.169.0.0 125.169.255.255
125.171.0.0 125.171.255.255
125.208.0.0 125.208.63.255
125.210.0.0 125.211.255.255
125.213.0.0 125.223.255.255
125.254.128.0 125.254.255.255
132.246.27.0 132.246.27.255
147.243.224.0 147.243.255.255
159.226.0.0 159.226.255.255
161.207.0.0 161.207.255.255
162.105.0.0 162.105.255.255
167.139.0.0 167.139.255.255
168.160.0.0 168.160.255.255
192.188.170.0 192.188.170.255
192.192.9.0 192.192.78.255
194.54.88.32 194.54.88.47
194.117.101.45 194.117.119.101
195.112.167.20 195.112.177.127
199.64.0.0 199.64.0.255
202.0.110.0 202.0.110.255
202.3.77.0 202.4.255.255
202.8.128.0 202.8.159.255
202.10.64.0 202.12.19.255
202.14.88.0 202.14.238.255
202.20.120.0 202.20.120.255
202.22.248.0 202.22.255.255
202.38.0.0 202.38.191.255
202.41.142.0 202.41.255.255
202.43.144.0 202.43.159.255
202.46.224.0 202.46.239.255
202.60.112.0 202.60.127.255
202.63.248.0 202.63.251.255
202.69.16.0 202.70.31.255
202.74.8.0 202.76.240.255
202.85.208.0 202.85.223.255
202.90.0.0 202.104.27.255
202.104.27.255 202.114.27.255
202.114.27.255 202.124.27.255
202.127.0.0 202.127.255.255
202.130.0.0 202.131.223.255
202.136.48.0 202.136.255.255
202.141.160.0 202.143.31.255
202.148.96.0 202.150.31.255
202.152.176.0 202.153.63.255
202.158.160.0 202.158.200.255
202.160.168.0 202.160.191.255
202.164.0.0 202.168.190.255
202.170.216.0 202.170.224.255
202.173.8.0 202.173.255.255
202.179.240.0 202.181.127.255
202.189.80.0 202.189.95.255
202.192.0.0 202.207.255.255
202.234.0.0 202.234.255.255
203.79.0.0 203.81.31.255
203.83.56.0 203.83.63.255
203.86.0.0 203.95.111.255
203.99.80.0 203.100.207.255
203.110.160.0 203.110.191.255
203.112.80.0 203.112.95.255
203.118.192.0 203.119.35.255
203.128.96.0 203.128.159.255
203.130.32.0 203.130.63.255
203.132.32.0 203.132.63.255
203.134.240.0 203.135.175.255
203.148.0.0 203.148.63.255
203.152.64.0 203.152.95.255
203.156.192.0 203.156.255.255
203.158.16.0 203.158.23.255
203.160.64.0 203.161.223.255
203.163.73.0 203.163.73.255
203.166.160.0 203.166.191.255
203.171.224.0 203.171.239.255
203.174.7.0 203.176.175.255
203.184.80.0 203.184.95.255
203.187.160.0 203.187.191.255
203.190.96.0 203.192.31.255
203.196.0.0 203.196.7.255
203.207.64.0 203.209.255.255
203.212.0.0 203.212.95.255
210.2.0.0 210.2.31.255
210.5.0.0 210.5.159.255
210.12.0.0 210.16.191.255
210.21.0.0 210.23.32.255
210.25.0.0 210.37.255.255
210.37.255.255 210.47.255.255
210.51.0.0 210.53.255.255
210.56.80.23 210.56.223.255
210.72.0.0 210.79.255.255
210.82.0.0 210.83.255.255
210.87.128.0 210.87.191.255
210.144.136.0 210.144.142.255
210.156.110.0 210.156.110.255
210.166.2.0 210.166.2.255
210.168.1.0 210.168.71.255
210.185.192.0 210.186.24.255
210.192.96.0 210.192.127.255
210.210.159.0 210.211.15.255
211.64.0.0 211.71.255.255
211.80.0.0 211.93.255.255
211.93.255.255 211.103.255.255
211.136.0.0 211.147.255.255
211.147.255.255 211.157.255.255
212.63.181.28 212.63.181.79
218.0.0.0 218.11.255.255
218.11.255.255 218.21.255.255
218.21.255.255 218.31.255.255
218.56.0.0 218.69.255.255
218.69.255.255 218.79.255.255
218.79.255.255 218.89.255.255
218.89.255.255 218.99.255.255
218.104.0.0 218.109.255.255
218.185.192.0 218.185.223.255
218.192.0.0 218.207.255.255
218.240.0.0 218.247.255.255
218.249.0.0 218.249.255.255
219.72.0.0 219.72.255.255
219.82.0.0 219.82.255.255
219.128.0.0 219.139.255.255
219.139.255.255 219.149.255.255
219.216.0.0 219.225.255.255
219.225.255.255 219.239.255.255
219.242.0.0 219.247.255.255
220.101.192.0 220.101.255.255
220.112.0.0 220.115.255.255
220.152.128.0 220.152.255.255
220.154.0.0 220.155.255.255
220.159.242.0 220.167.255.255
220.167.255.255 220.177.255.255
220.177.255.255 220.187.255.255
220.187.255.255 220.197.255.255
220.197.255.255 220.207.255.255
220.231.0.0 220.232.127.255
220.234.0.0 220.234.255.255
220.242.0.0 220.243.255.255
220.248.0.0 220.252.255.255
221.0.0.0 221.15.255.255
221.122.0.0 221.123.255.255
221.129.0.0 221.131.255.255
221.133.224.0 221.133.255.255
221.136.0.0 221.137.255.255
221.172.0.0 221.183.255.255
221.192.0.0 221.202.255.255
221.202.255.255 221.212.255.255
221.212.255.255 221.222.255.255
221.222.255.255 221.239.255.255
222.15.56.0 222.25.255.255
222.25.255.255 222.35.255.255
222.25.255.255 222.45.255.255
222.45.255.255 222.55.255.255
222.55.255.255 222.65.255.255
222.65.255.255 222.75.255.255
222.75.255.255 222.85.255.255
222.85.255.255 222.95.255.255
222.125.0.0 222.126.255.255
222.128.0.0 222.143.255.255
222.160.0.0 222.163.255.255
222.167.134.0 222.223.255.255
222.240.0.0 222.249.255.255";

/** 分割IP */
$ary = preg_split( '/\s/' , $str );

/** 判断奇偶数 */
$num = 0;

/** 处理结果 */
$aryRes = array();
$aryTmp = array();

/** 开始处理 */
foreach ( $ary as $v )
{
	if ( $num > 1 )
		$num = 0;

	// 两个ip分割形成ip段
	if ( $num === 0 )
		$aryTmp = array();

	// 分割ip
	$tmp = explode( '.' , $v );
	$tmps = '';
	// 转换成三位数字
	foreach ( $tmp as $t )
		$tmps .= sprintf("%03d", $t);

	// 转换成数字，并存入数组
	$aryTmp[] = intval( $tmps );
	if ( $num === 1 )
		$aryRes[] = $aryTmp;

	$num ++;
}

/** 组建集合 */
$stmp = "<?php\n";
$stmp .= 'return array('."\n";
foreach ( $aryRes as $r )
{
	$stmp .= "	array(".$r[0].",".$r[1]."),\n";
}
$stmp .= ");\n?>\n";

/** 写入文件 */
exec( 'echo \''.$stmp.'\' > result.php' );
?>
